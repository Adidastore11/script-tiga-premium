#!/bin/bash

# WARNA
NC="\033[0m"
BOLD="\033[1m"
CYAN="\033[1;36m"
MAGENTA="\033[1;35m"
WHITE="\033[1;37m"
RED="\033[1;31m"
YELLOW="\033[1;33m"
ORANGE="\033[38;5;214m"
BLUE="\033[1;34m"

# TYPEWRITER
typewriter() {
  local text="$1"
  local delay="${2:-0.07}"
  while IFS= read -r line; do
    for ((i=0; i<${#line}; i++)); do
      echo -ne "${CYAN}${BOLD}${line:$i:1}${NC}"
      sleep $delay
    done
    echo ""
  done <<< "$text"
}

# CEK IZIN
MYIP=$(curl -sS ipv4.icanhazip.com)
data_ip="https://raw.githubusercontent.com/Adidastore11/izin/main/ip"
data_server=$(curl -s --insecure -v https://google.com 2>&1 | grep Date | sed -e 's/< Date: //')
date_list=$(date +"%Y-%m-%d" -d "$data_server")

checking_sc() {
  useexp=$(wget -qO- $data_ip | grep $MYIP | awk '{print $3}')
  if [[ $(date -d "$date_list" +%s) -lt $(date -d "$useexp" +%s) ]]; then
    echo -ne
  else
    echo -e "${RED}────────────────────────────────────────────${NC}"
    echo -e "${WHITE}${BOLD}     TEKIRO AUTOSCRIPT PREMIUM DIBLOKIR     ${NC}"
    echo -e "${RED}────────────────────────────────────────────${NC}"
    echo -e "${RED}PERMISSION DENIED untuk IP ${MYIP}${NC}"
    exit
  fi
}
checking_sc

# HEADER: Efek Ketik
clear
echo ""
typewriter "INI ADALAH MENU VMESS & VLESS" 0.07
sleep 0.5

# MENU
echo -e "${BLUE}┌──────────────────────────────────────────────────────────────┐${NC}"
echo -e "${BOLD}${MAGENTA}                 XRAY VMESS & VLESS PANEL （日本式）               ${NC}"
echo -e "${BLUE}└──────────────────────────────────────────────────────────────┘${NC}"

# XRAY VMESS
echo -e "${YELLOW}${BOLD}▶ VMESS SECTION${NC}"
echo -e "  ${ORANGE}[01].${NC} Buat Akun VMESS             ${CYAN}（アカウント作成）"
echo -e "  ${ORANGE}[02].${NC} Trial VMESS                 ${CYAN}（トライアル）"
echo -e "  ${ORANGE}[03].${NC} Hapus Akun VMESS            ${CYAN}（削除）"
echo -e "  ${ORANGE}[04].${NC} Perpanjang Akun VMESS       ${CYAN}（延長）"
echo -e "  ${ORANGE}[05].${NC} Cek Login VMESS             ${CYAN}（ログイン確認）"
echo -e "  ${ORANGE}[06].${NC} Detail Akun VMESS           ${CYAN}（詳細情報）"
echo -e "  ${ORANGE}[07].${NC} Edit Limit Kuota VMESS      ${CYAN}（クォータ制限）"
echo -e "  ${ORANGE}[08].${NC} Edit Limit IP VMESS         ${CYAN}（IP制限）"

# XRAY VLESS
echo -e "\n${YELLOW}${BOLD}▶ VLESS SECTION${NC}"
echo -e "  ${ORANGE}[09].${NC} Buat Akun VLESS             ${CYAN}（アカウント作成）"
echo -e "  ${ORANGE}[10].${NC} Trial VLESS                 ${CYAN}（トライアル）"
echo -e "  ${ORANGE}[11].${NC} Hapus Akun VLESS            ${CYAN}（削除）"
echo -e "  ${ORANGE}[12].${NC} Perpanjang Akun VLESS       ${CYAN}（延長）"
echo -e "  ${ORANGE}[13].${NC} Cek Login VLESS             ${CYAN}（ログイン確認）"
echo -e "  ${ORANGE}[14].${NC} Detail Akun VLESS           ${CYAN}（詳細情報）"
echo -e "  ${ORANGE}[15].${NC} Edit Limit Kuota VLESS      ${CYAN}（クォータ制限）"
echo -e "  ${ORANGE}[16].${NC} Edit Limit IP VLESS         ${CYAN}（IP制限）"
echo -e "  ${ORANGE}[17].${NC} ON/OFF Semua Limit XRAY     ${CYAN}（全体制限切替）"

# Recovery
echo -e "\n${YELLOW}${BOLD}▶ RECOVERY ACCOUNT${NC}"
echo -e "  ${ORANGE}[18].${NC} Recovery Akun VMESS         ${CYAN}（復元）"
echo -e "  ${ORANGE}[19].${NC} Recovery Akun VLESS         ${CYAN}（復元）"

# INPUT
echo -e "${BLUE}──────────────────────────────────────────────────────────────${NC}"
echo ""
read -p " Pilih opsi [01-19] : " menu
echo ""

# ACTIONS
case $menu in
1) addws ;;
2) trialws ;;
3) delws ;;
4) renewws ;;
5) cekws ;;
6) user-ws ;;
7) editqvm ;;
8) editvmip ;;
9) addvless ;;
10) trialvless ;;
11) delvless ;;
12) renewvless ;;
13) cekvless ;;
14) user-vless ;;
15) editqvless ;;
16) editvlip ;;
17) onoff ;;
18) recovery-vm ;;
19) recovery-vl ;;
*) clear ; menu ;;
esac